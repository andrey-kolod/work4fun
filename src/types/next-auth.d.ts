// src/types/next-auth.d.ts

/**
 * üéØ –≠–¢–û –ú–ê–ì–ò–Ø TYPESCRIPT - –†–ê–°–®–ò–†–ï–ù–ò–ï –¢–ò–ü–û–í NEXT-AUTH!
 *
 * –≠—Ç–æ—Ç —Ñ–∞–π–ª —Ä–∞—Å—à–∏—Ä—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã NextAuth
 * —á—Ç–æ–±—ã TypeScript –∑–Ω–∞–ª –æ –Ω–∞—à–∏—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª—è—Ö (role)
 *
 * üìÅ –§–ê–ô–õ .d.ts - –ß–¢–û –≠–¢–û –ó–ù–ê–ß–ò–¢:
 * - .d.ts = Declaration Files (—Ñ–∞–π–ª—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π TypeScript)
 * - –°–æ–¥–µ—Ä–∂–∞—Ç –¢–û–õ–¨–ö–û —Ç–∏–ø—ã, –±–µ–∑ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞
 * - TypeScript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
 *
 * üé™ –ü–û–ß–ï–ú–£ –≠–¢–û –í–ê–ñ–ù–û:
 * –ë–µ–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ TypeScript –±—ã —Ä—É–≥–∞–ª—Å—è:
 * "–°–≤–æ–π—Å—Ç–≤–æ 'role' –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ 'Session'"
 */

// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º NextAuth –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–æ–≤—ã–º —Ç–∏–ø–∞–º
import NextAuth from 'next-auth';

/**
 * üîß DECLARE MODULE - –†–ê–°–®–ò–†–ï–ù–ò–ï –°–£–©–ï–°–¢–í–£–Æ–©–ò–• –¢–ò–ü–û–í
 *
 * TypeScript –ø–æ–∑–≤–æ–ª—è–µ—Ç "–¥–æ–ø–æ–ª–Ω—è—Ç—å" —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π
 * –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "Declaration Merging" (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π)
 */
declare module 'next-auth' {
  /**
   * üìã –†–ê–°–®–ò–†–Ø–ï–ú –ò–ù–¢–ï–†–§–ï–ô–° SESSION - –î–ê–ù–ù–´–ï –°–ï–°–°–ò–ò –ù–ê –ö–õ–ò–ï–ù–¢–ï
   *
   * Session - —ç—Ç–æ –æ–±—ä–µ–∫—Ç –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø–æ–ª—É—á–∞–µ–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ —á–µ—Ä–µ–∑ useSession()
   * –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é NextAuth –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –ø–æ–ª—è
   * –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞—à–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è –¥–ª—è DirectWorkflow
   */
  interface Session {
    /**
     * user - –æ–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * –≠—Ç–æ —Ç–æ —á—Ç–æ –º—ã –≤–∏–¥–∏–º –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:
     * const { data: session } = useSession();
     * console.log(session.user.role); // 'ADMIN'
     */
    user: {
      /**
       * üÜî id - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
       * –í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π Session —ç—Ç–æ–≥–æ –ø–æ–ª—è –ù–ï–¢!
       * –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ —á—Ç–æ–±—ã –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ ID –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
       */
      id: string;

      /**
       * üìß email - —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
       * –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–ª–µ NextAuth, –Ω–æ –º—ã –¥–µ–ª–∞–µ–º –µ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º
       */
      email: string;

      /**
       * üë§ name - –ø–æ–ª–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
       * –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ (–º–æ–∂–µ—Ç –±—ã—Ç—å undefined)
       * –§–æ—Ä–º–∞—Ç: "–ò–º—è –§–∞–º–∏–ª–∏—è" –∏–∑ –Ω–∞—à–µ–π –ë–î
       */
      name?: string;

      /**
       * üéØ role - –ù–ê–®–ê –ì–õ–ê–í–ù–ê–Ø –ö–ê–°–¢–û–ú–ù–ê–Ø –î–û–ë–ê–í–ö–ê!
       * –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∞–≤:
       * - 'SUPER_ADMIN' - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É
       * - 'ADMIN' - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
       * - 'USER' - –±–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
       *
       * –≠–¢–û–ì–û –ü–û–õ–Ø –ù–ï–¢ –í –°–¢–ê–ù–î–ê–†–¢–ù–û–ô –°–ï–°–°–ò–ò NEXT-AUTH!
       */
      role: string;
    };
  }

  /**
   * üë§ –†–ê–°–®–ò–†–Ø–ï–ú –ò–ù–¢–ï–†–§–ï–ô–° USER - –î–ê–ù–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –ù–ê –°–ï–†–í–ï–†–ï
   *
   * User - —ç—Ç–æ –æ–±—ä–µ–∫—Ç –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∏–∑ authorize() —Ñ—É–Ω–∫—Ü–∏–∏
   * –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è JWT —Ç–æ–∫–µ–Ω–∞ –∏ —Å–µ—Å—Å–∏–∏
   */
  interface User {
    /**
     * üéØ role - —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –Ω–∞—à–µ–π –ë–î
     * –≠—Ç–æ –ø–æ–ª–µ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ auth.ts –≤ —Ñ—É–Ω–∫—Ü–∏–∏ authorize()
     *
     * –ü—Ä–∏–º–µ—Ä –∏–∑ auth.ts:
     * return {
     *   id: user.id.toString(),
     *   email: user.email,
     *   name: `${user.firstName} ${user.lastName}`,
     *   role: user.role // ‚Üê –≠–¢–û –ü–û–õ–ï!
     * };
     */
    role: string;
  }
}

/**
 * üîê –†–ê–°–®–ò–†–Ø–ï–ú –¢–ò–ü–´ –î–õ–Ø JWT –¢–û–ö–ï–ù–ê
 *
 * JWT (JSON Web Token) - —Ç–æ–∫–µ–Ω –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç—Å—è —É –∫–ª–∏–µ–Ω—Ç–∞
 * –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 */
declare module 'next-auth/jwt' {
  /**
   * üé´ –ò–ù–¢–ï–†–§–ï–ô–° JWT - –î–ê–ù–ù–´–ï –í –ó–ê–®–ò–§–†–û–í–ê–ù–ù–û–ú –¢–û–ö–ï–ù–ï
   *
   * JWT —Ç–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ cookie –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
   * –ú—ã —Ä–∞—Å—à–∏—Ä—è–µ–º –µ–≥–æ —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—à—É –∫–∞—Å—Ç–æ–º–Ω—É—é —Ä–æ–ª—å
   */
  interface JWT {
    /**
     * üéØ role - —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ JWT —Ç–æ–∫–µ–Ω–µ
     *
     * –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
     * 1. –í auth.ts –≤ jwt callback –º—ã –¥–æ–±–∞–≤–ª—è–µ–º —Ä–æ–ª—å –≤ —Ç–æ–∫–µ–Ω:
     *    token.role = user.role;
     *
     * 2. –í session callback –º—ã –±–µ—Ä–µ–º —Ä–æ–ª—å –∏–∑ —Ç–æ–∫–µ–Ω–∞:
     *    session.user.role = token.role;
     *
     * 3. –¢–µ–ø–µ—Ä—å —Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
     */
    role: string;
  }
}

/**
 * üé™ –ö–ê–ö –í–°–ï –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –í–ú–ï–°–¢–ï - –ü–û–õ–ù–´–ô FLOW:
 *
 * 1. üìù –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –í–•–û–î–ò–¢ –í –°–ò–°–¢–ï–ú–£:
 *    - –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
 *    - –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ authorize() —Ñ—É–Ω–∫—Ü–∏—é
 *
 * 2. üîê AUTHORIZE –í–û–ó–í–†–ê–©–ê–ï–¢ USER –° ROLE:
 *    // auth.ts - authorize —Ñ—É–Ω–∫—Ü–∏—è
 *    return {
 *      id: '123',
 *      email: 'admin@directworkflow.com',
 *      name: '–ê–Ω–¥—Ä–µ–π –ö–æ–ª–æ–∂–∞–Ω—ã–π',
 *      role: 'SUPER_ADMIN' // ‚Üê –ù–ê–®–ê ROLE!
 *    };
 *
 * 3. üé´ JWT CALLBACK –î–û–ë–ê–í–õ–Ø–ï–¢ ROLE –í –¢–û–ö–ï–ù:
 *    // auth.ts - jwt callback
 *    if (user) {
 *      token.role = user.role; // ‚Üê –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ JWT
 *    }
 *
 * 4. üìã SESSION CALLBACK –î–û–ë–ê–í–õ–Ø–ï–¢ ROLE –í –°–ï–°–°–ò–Æ:
 *    // auth.ts - session callback
 *    if (session.user && token) {
 *      session.user.role = token.role; // ‚Üê –î–æ—Å—Ç–∞–µ–º –∏–∑ JWT
 *    }
 *
 * 5. üéâ –ö–õ–ò–ï–ù–¢ –ü–û–õ–£–ß–ê–ï–¢ –°–ï–°–°–ò–Æ –° ROLE:
 *    // React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
 *    const { data: session } = useSession();
 *    console.log(session.user.role); // 'SUPER_ADMIN' ‚úÖ
 */

/**
 * üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò - TYPE-SAFETY:
 *
 * –ë–ï–ó —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ TypeScript –±—ã —Ä—É–≥–∞–ª—Å—è:
 *
 * // ‚ùå –û–®–ò–ë–ö–ê - Property 'role' does not exist on type 'Session'
 * const role = session.user.role;
 *
 * // ‚ùå –û–®–ò–ë–ö–ê - Property 'role' does not exist on type 'User'
 * return { ..., role: user.role };
 *
 * // ‚ùå –û–®–ò–ë–ö–ê - Property 'role' does not exist on type 'JWT'
 * token.role = user.role;
 *
 * –° —ç—Ç–∏–º —Ñ–∞–π–ª–æ–º - –í–°–ï –†–ê–ë–û–¢–ê–ï–¢ ‚úÖ
 */

/**
 * üéØ –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –í –ü–†–û–ï–ö–¢–ï:
 *
 * 1. üîí –ó–ê–©–ò–¢–ê –†–û–£–¢–û–í –ü–û –†–û–õ–Ø–ú:
 *    // middleware.ts
 *    if (token?.role !== 'ADMIN') {
 *      return NextResponse.redirect('/unauthorized');
 *    }
 *
 * 2. üé® –ü–û–ö–ê–ó/–°–ö–†–´–¢–ò–ï –≠–õ–ï–ú–ï–ù–¢–û–í –í –ò–ù–¢–ï–†–§–ï–ô–°–ï:
 *    // components/AdminPanel.tsx
 *    const { data: session } = useSession();
 *    if (session.user.role === 'ADMIN') {
 *      return <AdminTools />;
 *    }
 *
 * 3. üöÄ –£–°–õ–û–í–ù–´–ô –†–ï–ù–î–ï–†–ò–ù–ì –î–ê–®–ë–û–†–î–û–í:
 *    // app/dashboard/page.tsx
 *    switch(session.user.role) {
 *      case 'SUPER_ADMIN': return <SuperAdminDashboard />;
 *      case 'ADMIN': return <AdminDashboard />;
 *      case 'USER': return <UserDashboard />;
 *    }
 */

/**
 * üí° –í–ê–ñ–ù–´–ï –ú–û–ú–ï–ù–¢–´:
 *
 * 1. ‚ùó –≠–¢–û –¢–û–õ–¨–ö–û –¢–ò–ü–´ - –Ω–∏–∫–∞–∫–æ–≥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞
 * 2. ‚ùó TypeScript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
 * 3. ‚ùó –ù–µ –Ω—É–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –¥—Ä—É–≥–∏–µ –º–µ—Å—Ç–∞
 * 4. ‚ùó –†–∞–±–æ—Ç–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ –≤–æ –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–µ
 * 5. ‚ùó –ë–µ–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –Ω–∞—à –∫–æ–¥ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
 */

/**
 * üöÄ –ß–¢–û –î–ê–ï–¢ –≠–¢–û–¢ –§–ê–ô–õ:
 *
 * - ‚úÖ TypeScript –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è session.user.role
 * - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
 * - ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–µ—á–∞—Ç–æ–∫ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –ø–æ–ª–µ–π
 * - ‚úÖ Better Developer Experience (DX)
 * - ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å TypeScript –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
 */

/**
 * üìö –°–°–´–õ–ö–ò –î–õ–Ø –£–ì–õ–£–ë–õ–ï–ù–ù–û–ì–û –ò–ó–£–ß–ï–ù–ò–Ø:
 *
 * - TypeScript Declaration Merging:
 *   https://www.typescriptlang.org/docs/handbook/declaration-merging.html
 *
 * - NextAuth TypeScript Guide:
 *   https://next-auth.js.org/getting-started/typescript
 *
 * - Module Augmentation:
 *   https://www.typescriptlang.org/docs/handbook/declaration-files/templates/module-d-ts.html
 */
